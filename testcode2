List<Predicate> joinPredicates = new ArrayList<>();
    for (int i = 0; i < groupByColumns.size(); i++) {
        String column = groupByColumns.get(i);
        joinPredicates.add(
            builder.equal(root.get(column), subquery.getRoots().iterator().next().get(column))
        );
    }

    Predicate joinPredicate = builder.and(joinPredicates.toArray(new Predicate[0]));
